* add unit tests
  duh, but requires a lot more refactoring before this is viable